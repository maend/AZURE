{
    "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters":{
        "accountname":{
            "type": "string",
            "minLength":3,
            "maxLength":24,
            "metadata": {
                "description":"Unique DNS Name of Storage account . "
            }
        },
        "storageAccountSKU": {
            "type": "string",
            "allowedValues": [
                "Standard_LRS",
                "Standard_GRS"
            ],
            "metadata": {
                "description":"Approved SKUs for deployment. "
            }
        },
        "location": {
            "type": "string",
            "defaultValue":"[resourceGroup().location]"
        },
        "stage": {
            "type": "string",
            "defaultValue":"test",
            "allowedValues": [
                "test" , "dev" , "qa" , "prod"
            ],
            "metadata": {"description" : "Environment stage name for deployment."}
        }

    },
    "variables":{
        "accountname": "[concat(parameters('accountname') , parameters('stage'))]"
    },
    "resources": [
        {
            "type": "Microsoft.Storage/storageAccounts",
            "apiVersion": "2021-04-01",
            "name": "[variables('accountname')]",
            "location": "[parameters('location')]",
            "sku": {"name": "[parameters('storageAccountSKU')]"},
            "kind": "StorageV2"
        }
    ]

}